BX.namespace("BX.DDAPP.Tools"),BX.DDAPP.Tools.FormValidator=function(e,i){this.formId=e,this.params=i||{},this.form=document.getElementById(e),this.form?this.init():console.error("FormValidator: Form not found",e)},BX.DDAPP.Tools.FormValidator.prototype={init:function(){this.addFormClass(),this.bindEvents()},addFormClass:function(){this.form.classList.add("needs-validation")},bindEvents:function(){this.form.querySelectorAll("input, select, textarea").forEach(function(e){this.bindFieldEvents(e)}.bind(this))},bindFieldEvents:function(e){this.bindClearValidationEvents(e)},bindClearValidationEvents:function(e){"text"!==e.type&&"email"!==e.type&&"tel"!==e.type&&"number"!==e.type&&"url"!==e.type&&"password"!==e.type&&"TEXTAREA"!==e.tagName||e.addEventListener("input",function(){this.clearFieldValidation(e),this.clearGeneralMessage()}.bind(this)),"SELECT"!==e.tagName&&"date"!==e.type&&"datetime-local"!==e.type&&"checkbox"!==e.type&&"radio"!==e.type&&"file"!==e.type||e.addEventListener("change",function(){"checkbox"===e.type||"radio"===e.type?this.clearGroupValidation(e):this.clearFieldValidation(e),this.clearGeneralMessage()}.bind(this))},clearGeneralMessage:function(){var e=this.form.querySelector('.alert[role="alert"]');e&&!e.classList.contains("d-none")&&(e.classList.add("d-none"),e.textContent="")},validateField:function(e){return this.clearFieldValidation(e),!0},validateForm:function(){return!0},showFieldErrors:function(e){Object.keys(e).forEach(function(i){var t=this.form.querySelector('[name="'+i+'"]');if(t){if(t.classList.add("is-invalid"),t.classList.remove("is-valid"),this.showFieldError(t,e[i]),"checkbox"===t.type||"radio"===t.type)this.form.querySelectorAll('[name="'+i+'"]').forEach(function(e){e.classList.add("is-invalid"),e.classList.remove("is-valid")});if("file"===t.type){var a=t.closest(".file-upload-area");a&&(a.classList.add("is-invalid"),a.classList.remove("is-valid"))}}}.bind(this))},clearAllValidation:function(){this.form.querySelectorAll(".is-invalid, .is-valid").forEach(function(e){e.classList.remove("is-invalid","is-valid")}),this.form.querySelectorAll(".file-upload-area.is-invalid, .file-upload-area.is-valid").forEach(function(e){e.classList.remove("is-invalid","is-valid")}),this.form.querySelectorAll(".invalid-feedback").forEach(function(e){e.textContent="",e.style.display="none"})},clearFieldValidation:function(e){if(e){if(e.classList.remove("is-invalid","is-valid"),"file"===e.type){var i=e.closest(".file-upload-area");i&&i.classList.remove("is-invalid","is-valid")}this.clearFieldError(e)}},clearGroupValidation:function(e){e&&this.form.querySelectorAll('[name="'+e.name+'"]').forEach(function(e){this.clearFieldValidation(e)}.bind(this))},showFieldError:function(e,i){var t=e.closest(".form-group, .mb-3, .form-check");t||(t=e.parentNode);var a=t.querySelector(".invalid-feedback");a||((a=document.createElement("div")).className="invalid-feedback",t.appendChild(a)),a.textContent=i,a.style.display="block"},clearFieldError:function(e){var i=e.closest(".form-group, .mb-3, .form-check");i||(i=e.parentNode);var t=i.querySelector(".invalid-feedback");t&&(t.textContent="",t.style.display="none")},scrollToFirstError:function(){var e=this.form.querySelector(".is-invalid");e&&(e.focus(),e.scrollIntoView({behavior:"smooth",block:"center"}))}};