BX.namespace("BX.DDAPP.Tools"),BX.DDAPP.Tools.FormValidator=function(i,e){this.formId=i,this.params=e||{},this.form=document.getElementById(i),this.form?this.init():console.error("FormValidator: Form not found",i)},BX.DDAPP.Tools.FormValidator.prototype={init:function(){this.addFormClass(),this.bindEvents()},addFormClass:function(){this.form.classList.add("needs-validation")},bindEvents:function(){this.form.querySelectorAll("input, select, textarea").forEach(function(i){this.bindFieldEvents(i)}.bind(this))},bindFieldEvents:function(i){this.bindClearValidationEvents(i)},bindClearValidationEvents:function(i){"text"!==i.type&&"email"!==i.type&&"tel"!==i.type&&"number"!==i.type&&"url"!==i.type&&"password"!==i.type&&"TEXTAREA"!==i.tagName||i.addEventListener("input",function(){this.clearFieldValidation(i)}.bind(this)),"SELECT"!==i.tagName&&"date"!==i.type&&"datetime-local"!==i.type&&"checkbox"!==i.type&&"radio"!==i.type&&"file"!==i.type||i.addEventListener("change",function(){"checkbox"===i.type||"radio"===i.type?this.clearGroupValidation(i):this.clearFieldValidation(i)}.bind(this))},validateField:function(i){return this.clearFieldValidation(i),!0},validateForm:function(){return!0},showFieldErrors:function(i){Object.keys(i).forEach(function(e){var t=this.form.querySelector('[name="'+e+'"]');if(t){if(t.classList.add("is-invalid"),t.classList.remove("is-valid"),this.showFieldError(t,i[e]),"checkbox"===t.type||"radio"===t.type)this.form.querySelectorAll('[name="'+e+'"]').forEach(function(i){i.classList.add("is-invalid"),i.classList.remove("is-valid")});if("file"===t.type){var a=t.closest(".file-upload-area");a&&(a.classList.add("is-invalid"),a.classList.remove("is-valid"))}}}.bind(this))},clearAllValidation:function(){this.form.querySelectorAll(".is-invalid, .is-valid").forEach(function(i){i.classList.remove("is-invalid","is-valid")}),this.form.querySelectorAll(".file-upload-area.is-invalid, .file-upload-area.is-valid").forEach(function(i){i.classList.remove("is-invalid","is-valid")}),this.form.querySelectorAll(".invalid-feedback").forEach(function(i){i.textContent="",i.style.display="none"})},clearFieldValidation:function(i){if(i){if(i.classList.remove("is-invalid","is-valid"),"file"===i.type){var e=i.closest(".file-upload-area");e&&e.classList.remove("is-invalid","is-valid")}this.clearFieldError(i)}},clearGroupValidation:function(i){i&&this.form.querySelectorAll('[name="'+i.name+'"]').forEach(function(i){this.clearFieldValidation(i)}.bind(this))},showFieldError:function(i,e){var t=i.closest(".form-group, .mb-3, .form-check");t||(t=i.parentNode);var a=t.querySelector(".invalid-feedback");a||((a=document.createElement("div")).className="invalid-feedback",t.appendChild(a)),a.textContent=e,a.style.display="block"},clearFieldError:function(i){var e=i.closest(".form-group, .mb-3, .form-check");e||(e=i.parentNode);var t=e.querySelector(".invalid-feedback");t&&(t.textContent="",t.style.display="none")},scrollToFirstError:function(){var i=this.form.querySelector(".is-invalid");i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"}))}};